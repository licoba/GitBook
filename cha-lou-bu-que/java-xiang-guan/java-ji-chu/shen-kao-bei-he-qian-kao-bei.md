---
description: 深拷贝和浅拷贝、拷贝地址与实例
---

# 深拷贝和浅拷贝

其实说浅拷贝和深拷贝只需要记住：改变原有对象，拷贝后的对象值会不会发生改变。

* 浅拷贝：改变原对象的值后，拷贝对象的值也会发生改变。
* 深拷贝：改变原对象的值后，拷贝对象的值不会发生改变。

### 引用拷贝

在Java里面，浅拷贝就是复制一份对象的引用（或者说地址），两个地址指向的是堆上的同一个对象，所以改变其中一个，另一个也会受到影响，可以理解为只是一个别名而已。

![](<../../../.gitbook/assets/image (12) (1) (1).png>)

### 浅拷贝

> 简而言之，浅拷贝仅仅复制所考虑的对象，而不复制它所引用的对象

浅拷贝的对象，在堆中也会有一份独立的内存。但是不是对属性的完全拷贝，如果对象的属性是值类型，将复制一份给克隆对象；如果对象的属性是引用类型（例如是另外一个对象）那么只会将引用类型的地址复制一份给拷贝对象，如果属性对象的值发生了变化，那么克隆对象的这个属性也会变化。示例：

```
Person p1 = new Person();
p2 = p1.clone();
p1.address.setProvince("广东"); // 更新原对象的属性对象的值
那么这时 p2.address.getProvince() 也会变为广东
```

![](<../../../.gitbook/assets/image (13).png>)

### 深拷贝

> 简而言之，深拷贝把要复制的对象所引用的对象都复制了一遍。

![](<../../../.gitbook/assets/image (12) (1).png>)

深拷贝与浅拷贝的区别就是会将对象的所有属性，都完全拷贝一份，在堆中重新分配内存。原对象和拷贝对象没有任何关系了，完全是两个相互独立，互不影响的对象。深拷贝有两种实现方式：

* **实现Cloneable接口**
* #### **实现Serializable 接口**





【参考文章】

* [https://segmentfault.com/a/1190000038523408](https://segmentfault.com/a/1190000038523408)
* [https://zhuanlan.zhihu.com/p/95686213](https://zhuanlan.zhihu.com/p/95686213)
* [https://blog.csdn.net/baiye\_xing/article/details/71788741](https://blog.csdn.net/baiye\_xing/article/details/71788741)
